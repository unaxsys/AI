<!doctype html>
<html lang="bg">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Anagami AI Core</title>
    <link rel="stylesheet" href="/public/styles.css" />
  </head>
  <body>
    <button id="themeToggle" class="theme-toggle" title="–°–º—è–Ω–∞ –Ω–∞ —Ç–µ–º–∞" aria-label="–°–º—è–Ω–∞ –Ω–∞ —Ç–µ–º–∞">üåô</button>

    <div id="loginView" class="center-card">
      <div class="login-brand">
        <img src="/public/logo.svg" class="logo" alt="Anagami logo" />
        <h1>Anagami AI Core</h1>
      </div>
      <input id="email" type="email" placeholder="Email" />
      <input id="password" type="password" placeholder="Password" />
      <button id="loginBtn">–í—Ö–æ–¥</button>
      <p id="loginError" class="error"></p>
    </div>

    <div id="appView" class="layout hidden">
      <header>
        <div class="brand"><img src="/public/logo.svg" class="logo" alt="Anagami logo" /><span>Anagami AI Core</span></div>
        <div class="user-menu-wrap">
          <button id="userMenuBtn" class="user-menu-btn"></button>
          <div id="userMenu" class="user-menu hidden">
            <button data-user-action="profile">–ü—Ä–æ—Ñ–∏–ª</button>
            <button data-user-action="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            <button data-user-action="password">–°–º—è–Ω–∞ –Ω–∞ –ø–∞—Ä–æ–ª–∞—Ç–∞</button>
            <button data-user-action="logout">–ò–∑—Ö–æ–¥</button>
          </div>
        </div>
      </header>
      <aside id="sideNav">
        <button data-tab="email">Email Replies</button>
        <button data-tab="offers">Offers</button>
        <button data-tab="contracts">Contracts</button>
        <button data-tab="support">Support</button>
        <button data-tab="marketing">Marketing</button>
        <button data-tab="recruiting">Recruiting</button>
        <button data-tab="escalations">Escalations</button>
        <button data-tab="sales">–ü—Ä–æ–¥–∞–∂–±–∏</button>
        <button data-tab="accounting">Accounting Issues</button>
        <button data-tab="tax">Tax Issues</button>
        <button data-tab="cases">Cases (NRA/Companies)</button>
        <button data-tab="procedures">Rules & Procedures</button>
        <button id="adminTabBtn" data-tab="admin">Admin</button>
      </aside>
      <main>
        <section id="passwordBox" class="panel hidden">
          <h3>–°–º—è–Ω–∞ –Ω–∞ –ø–∞—Ä–æ–ª–∞ (–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ)</h3>
          <p>–¢–æ–∑–∏ –∞–∫–∞—É–Ω—Ç –µ —Å –≤—Ä–µ–º–µ–Ω–Ω–∞ –ø–∞—Ä–æ–ª–∞. –ú–æ–ª—è, –≤—ä–≤–µ–¥–µ—Ç–µ –Ω–æ–≤–∞ –ø–∞—Ä–æ–ª–∞ (–º–∏–Ω. 8 —Å–∏–º–≤–æ–ª–∞), –∑–∞ –¥–∞ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ.</p>
          <div class="password-grid">
            <div class="password-field-wrap">
              <input id="newPassword" type="password" placeholder="–ù–æ–≤–∞ –ø–∞—Ä–æ–ª–∞" />
              <button id="toggleNewPassword" type="button" class="password-eye" aria-label="–ü–æ–∫–∞–∂–∏/—Å–∫—Ä–∏–π –Ω–æ–≤–∞—Ç–∞ –ø–∞—Ä–æ–ª–∞">üëÅÔ∏è</button>
            </div>
            <div class="password-field-wrap">
              <input id="confirmPassword" type="password" placeholder="–ü–æ—Ç–≤—ä—Ä–¥–∏ –ø–∞—Ä–æ–ª–∞—Ç–∞" />
              <button id="toggleConfirmPassword" type="button" class="password-eye" aria-label="–ü–æ–∫–∞–∂–∏/—Å–∫—Ä–∏–π –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ—Ç–æ">üëÅÔ∏è</button>
            </div>
            <button id="changePasswordBtn">–°–º–µ–Ω–∏ –ø–∞—Ä–æ–ª–∞</button>
          </div>
          <p id="passwordError" class="error"></p>
        </section>

        <section id="profilePanel" class="panel hidden">
          <h3>–ü—Ä–æ—Ñ–∏–ª</h3>
          <form id="profileForm" class="admin-form">
            <label>–ò–º–µ<input name="firstName" /></label>
            <label>–§–∞–º–∏–ª–∏—è<input name="lastName" /></label>
            <label>–ü–æ–∫–∞–∑–≤–∞–Ω–æ –∏–º–µ<input name="displayName" /></label>
            <label>–¢–µ–ª–µ—Ñ–æ–Ω<input name="phone" /></label>
            <label>–ü–æ–∑–∏—Ü–∏—è<input name="jobTitle" /></label>
            <label>–ö–æ–º–ø–∞–Ω–∏—è<input name="company" /></label>
            <label style="grid-column:1/-1;">–ë–∏–æ<textarea name="bio" rows="3"></textarea></label>
            <label>–°–Ω–∏–º–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª<input id="avatarInput" type="file" accept="image/*" /></label>
            <button type="submit">–ó–∞–ø–∞–∑–∏ –ø—Ä–æ—Ñ–∏–ª–∞</button>
          </form>
          <p id="profileStatus" class="status-message"></p>
        </section>

        <section id="settingsPanel" class="panel hidden">
          <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
          <div class="actions">
            <label>–ï–∑–∏–∫
              <select id="languageSelect">
                <option value="bg">–ë—ä–ª–≥–∞—Ä—Å–∫–∏</option>
                <option value="en">English</option>
              </select>
            </label>
            <button id="saveSettingsBtn">–ó–∞–ø–∞–∑–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
          </div>
          <p id="settingsStatus" class="status-message"></p>
        </section>

        <section id="workspacePanel">
          <div class="toolbar">
            <input id="search" placeholder="Search history" />
            <button id="refreshHistory">Refresh</button>
          </div>
          <h2 id="tabTitle">Email Replies</h2>
          <textarea id="taskInput" placeholder="Task input"></textarea>
          <div class="actions">
            <button id="createTask">Create Task</button>
            <button id="generateDraft">Generate Draft</button>
            <button id="saveFinal">Save Final</button>
            <button id="approveTask">Approve</button>
          </div>
          <div id="sections"></div>
          <h3>History</h3>
          <ul id="history"></ul>
        </section>

        <section id="adminPanel" class="panel hidden">
          <h3>Agent Control Center</h3>
          <div class="actions">
            <label>–ê–≥–µ–Ω—Ç
              <select id="adminAgentSelector"></select>
            </label>
            <button id="adminRefreshAgentBtn" type="button">–û–±–Ω–æ–≤–∏</button>
          </div>
          <p id="adminAgentStatus" class="status-message"></p>

          <div class="admin-tabs" id="adminTabs">
            <button data-admin-tab="users" class="active">Users</button>
            <button data-admin-tab="prompts">Prompts</button>
            <button data-admin-tab="knowledge">Knowledge</button>
            <button data-admin-tab="templates">Templates</button>
            <button data-admin-tab="pricing">Pricing</button>
            <button data-admin-tab="agents">Agents</button>
            <button data-admin-tab="sessions">Sessions</button>
            <button data-admin-tab="audit">Audit</button>
            <button data-admin-tab="examples">Examples</button>
            <button data-admin-tab="debug">Debug</button>
          </div>

          <div id="adminUsersTab" class="admin-tab-pane">
            <h4>–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</h4>
            <form id="adminCreateUserForm" class="admin-form admin-user-form">
              <div class="admin-user-row admin-user-row-3">
                <label class="field-short">Email<input name="email" type="email" required /></label>
                <label class="field-short">–ò–º–µ<input name="firstName" required /></label>
                <label class="field-short">–§–∞–º–∏–ª–∏—è<input name="lastName" required /></label>
              </div>
              <div class="admin-user-row admin-user-row-5">
                <label class="field-short">–ü–æ–ª
                  <select name="gender"><option value="male">male</option><option value="female">female</option><option value="other">other</option></select>
                </label>
                <label class="field-short">–†–æ–ª—è
                  <select name="role"><option value="user">user</option><option value="manager">manager</option><option value="admin">admin</option></select>
                </label>
                <label class="field-short password-inline">–ü–∞—Ä–æ–ª–∞<input name="password" id="adminGeneratedPassword" placeholder="–ì–µ–Ω–µ—Ä–∏—Ä–∞–π –∏–ª–∏ –≤—ä–≤–µ–¥–∏" /></label>
                <div class="action-button-wrap"><button type="button" id="generatePasswordBtn">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π</button></div>
                <div class="action-button-wrap"><button type="button" id="copyPasswordBtn">–ö–æ–ø–∏—Ä–∞–π</button></div>
              </div>
              <button type="submit">–°—ä–∑–¥–∞–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</button>
            </form>
            <p id="adminUserStatus" class="status-message"></p>
            <div class="admin-users-table-wrap"><table class="admin-table admin-users-table" id="adminUsersTable"><thead><tr><th>–ò–º–µ</th><th>Email</th><th>–†–æ–ª—è</th><th>–°—Ç–∞—Ç—É—Å</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead><tbody id="adminUsersList"></tbody></table></div>
          </div>

          <div id="adminPromptsTab" class="admin-tab-pane hidden">
            <h4>–ü—Ä–æ–º–ø—Ç–∏</h4>
            <form id="adminPromptForm" class="admin-form">
              <label>–¢–∏–ø<select name="type"><option value="system">system</option><option value="style">style</option><option value="rules">rules</option></select></label>
              <label>–°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ<textarea name="content" rows="6" required></textarea></label>
              <button type="submit">–ù–æ–≤ –ø—Ä–æ–º–ø—Ç</button>
            </form>
            <ul id="adminPromptsList"></ul>
          </div>

          <div id="adminKnowledgeTab" class="admin-tab-pane hidden"><h4>–ó–Ω–∞–Ω–∏—è</h4><form id="adminKnowledgeForm" class="admin-form"><label>Title<input name="title" required></label><label>Content<textarea name="content" rows="5" required></textarea></label><label>Source<input name="source"></label><label>Tags (comma)<input name="tags"></label><button type="submit">–î–æ–±–∞–≤–∏</button></form><ul id="adminKnowledgeList"></ul></div>
          <div id="adminTemplatesTab" class="admin-tab-pane hidden"><h4>–®–∞–±–ª–æ–Ω–∏</h4><form id="adminTemplateForm" class="admin-form"><label>Name<input name="name" required></label><label>Content<textarea name="content" rows="5" required></textarea></label><label>Tags<input name="tags"></label><button type="submit">–î–æ–±–∞–≤–∏</button></form><ul id="adminTemplatesList"></ul></div>
          <div id="adminPricingTab" class="admin-tab-pane hidden"><h4>–¶–µ–Ω–∏</h4><p>Scaffold –∑–∞ –±—ä–¥–µ—â–∏ —Ü–µ–Ω–∏ –ø–æ –∞–≥–µ–Ω—Ç.</p></div>
          <div id="adminAgentsTab" class="admin-tab-pane hidden"><h4>–ê–≥–µ–Ω—Ç–∏</h4><form id="adminAgentEditForm" class="admin-form"><label>Name<input name="name" required></label><label>Description<textarea name="description" rows="3"></textarea></label><label>Enabled<select name="is_enabled"><option value="true">true</option><option value="false">false</option></select></label><button type="submit">–ó–∞–ø–∞–∑–∏ –∞–≥–µ–Ω—Ç</button></form><ul id="adminAgentsList"></ul></div>
          <div id="adminSessionsTab" class="admin-tab-pane hidden"><h4 id="sessionsTitle">–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–∏ —Å–µ—Å–∏–∏</h4><div class="actions"><button id="refreshSessionsBtn" type="button">–û–±–Ω–æ–≤–∏ —Å–µ—Å–∏–∏—Ç–µ</button></div><div class="admin-users-table-wrap"><table class="admin-table admin-sessions-table" id="adminSessionsTable"><thead><tr><th>–°—Ç–∞—Ç—É—Å</th><th>–ü–æ—Ç—Ä–µ–±–∏—Ç–µ–ª</th><th>Email</th><th>–õ–æ–≥–Ω–∞—Ç –æ—Ç</th><th>–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç</th><th>–ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç</th></tr></thead><tbody id="adminSessionsList"></tbody></table></div></div>
          <div id="adminAuditTab" class="admin-tab-pane hidden"><h4>–û–¥–∏—Ç</h4><ul id="adminAuditList"></ul></div>
          <div id="adminExamplesTab" class="admin-tab-pane hidden"><h4>Training examples</h4><form id="adminExampleForm" class="admin-form"><label>Input<textarea name="input_text" rows="3" required></textarea></label><label>Output<textarea name="output_text" rows="3" required></textarea></label><label>Status<select name="status"><option>draft</option><option>approved</option><option>rejected</option></select></label><button type="submit">–î–æ–±–∞–≤–∏</button></form><ul id="adminExamplesList"></ul></div>
          <div id="adminDebugTab" class="admin-tab-pane hidden"><h4>Debug context</h4><pre id="adminDebugBox"></pre></div>
        </section>
      </main>
    </div>
    <script src="/public/app.js"></script>
  </body>
</html>
