:root {
  --bg:#090f1d;
  --panel:#121a2e;
  --accent:#2f86ff;
  --text:#e8eefc;
  --input:#0f1628;
  --border:#253353;
}
* { box-sizing:border-box; font-family: Inter, Arial, sans-serif; }
body { margin:0; background:var(--bg); color:var(--text); }
body.theme-light {
  --bg:#f0f3fa;
  --panel:#ffffff;
  --accent:#2f6dff;
  --text:#0e1a33;
  --input:#f8faff;
  --border:#cfdaee;
}
.hidden { display:none!important; }
.center-card { width:360px; margin:8vh auto; background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:24px; display:flex; flex-direction:column; gap:10px; }
.logo { width:38px; height:38px; }
.login-brand { display:flex; align-items:center; gap:10px; }
.login-brand h1 { margin:0; }
input, textarea, select { background:var(--input); color:var(--text); border:1px solid color-mix(in oklab, var(--border), #ffffff 10%); border-radius:8px; padding:10px; }
button { background:var(--accent); color:white; border:none; border-radius:8px; padding:10px 12px; cursor:pointer; }
button:disabled { opacity:0.5; cursor:not-allowed; }
.layout { display:grid; grid-template-columns: 220px 1fr; grid-template-rows:60px 1fr; min-height:100vh; }
header { grid-column:1/3; display:flex; justify-content:space-between; align-items:center; padding:0 16px; border-bottom:1px solid var(--border); background:color-mix(in oklab, var(--bg), #000 10%); }
.brand { display:flex; gap:10px; align-items:center; font-weight:700; }
aside { border-right:1px solid var(--border); padding:12px; display:flex; flex-direction:column; gap:8px; max-height: calc(100vh - 60px); overflow:auto; }
aside button { text-align:left; background:color-mix(in oklab, var(--panel), #0a1530 45%); }
main { padding:16px; }
textarea#taskInput { width:100%; min-height:120px; }
.actions,.toolbar { display:flex; gap:8px; margin:10px 0; align-items:center; }
#sections textarea { width:100%; min-height:90px; margin-bottom:8px; }
.error { color:#ff8f8f; min-height:20px; }
.panel { background:var(--panel); border:1px solid var(--border); border-radius:10px; padding:12px; margin-bottom:12px; }

aside button.active { background: var(--accent); }
.admin-form { display:grid; grid-template-columns: repeat(2, minmax(220px, 1fr)); gap:10px; margin:14px 0; }
.admin-form label { display:flex; flex-direction:column; gap:6px; font-size:14px; }
.admin-form button { width:max-content; }
.status-message { min-height:24px; margin:6px 0 12px; }
.status-message.success { color:#2fbf66; }

.user-menu-wrap { position:relative; }
.user-menu-btn { background:transparent; border:1px solid var(--border); color:var(--text); }
.user-menu { position:absolute; right:0; top:44px; background:var(--panel); border:1px solid var(--border); border-radius:10px; padding:8px; min-width:200px; z-index:9; }
.user-menu button { width:100%; text-align:left; margin-bottom:6px; }
.user-menu button:last-child { margin-bottom:0; }

.admin-tabs { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px; }
.admin-tabs button { background:color-mix(in oklab, var(--panel), #0a1530 45%); }
.admin-tabs button.active { background:var(--accent); }


.password-grid { display:grid; gap:10px; max-width:480px; }
.password-field-wrap { position:relative; }
.password-field-wrap input { width:100%; padding-right:44px; }
.password-eye {
  position:absolute;
  right:6px;
  top:50%;
  transform:translateY(-50%);
  width:34px;
  height:34px;
  border-radius:8px;
  padding:0;
}


.admin-user-form { display:flex; flex-direction:column; gap:10px; max-width:980px; }
.admin-user-row { display:grid; gap:10px; }
.admin-user-row-3 { grid-template-columns: repeat(3, minmax(220px, 1fr)); }
.admin-user-row-5 { grid-template-columns: repeat(5, minmax(140px, 1fr)); align-items:end; }
.admin-user-form .field-short { min-width:0; }
.admin-user-form .password-inline { min-width:0; }
.admin-user-form input, .admin-user-form select, .admin-user-form button { min-height:38px; }
.action-button-wrap { display:flex; align-items:flex-end; }
.action-button-wrap button { width:100%; }
.admin-user-form > button[type="submit"] { align-self:flex-start; }

.admin-users-table-wrap { margin-top:10px; overflow:auto; }
.admin-table { width:100%; border-collapse:separate; border-spacing:0; table-layout:fixed; }
.admin-table th, .admin-table td { padding:10px 12px; border-bottom:1px solid var(--border); vertical-align:top; font-size:14px; text-align:left; }
.admin-table th { position:sticky; top:0; background:var(--panel); z-index:1; font-weight:700; }
.admin-table td { word-break:break-word; }
.admin-table td.actions-cell { white-space:nowrap; }

.admin-users-table col.u-name { width:20%; }
.admin-users-table col.u-email { width:26%; }
.admin-users-table col.u-role { width:10%; }
.admin-users-table col.u-status { width:12%; }
.admin-users-table col.u-actions { width:32%; }

.datetime-cell { display:flex; flex-direction:column; line-height:1.2; }
.datetime-cell small { opacity:0.75; font-size:12px; }

.admin-sessions-table col.s-status { width:12%; }
.admin-sessions-table col.s-user { width:20%; }
.admin-sessions-table col.s-email { width:20%; }
.admin-sessions-table col.s-login { width:16%; }
.admin-sessions-table col.s-seen { width:16%; }
.admin-sessions-table col.s-duration { width:16%; }
.admin-sessions-table td:last-child { white-space:nowrap; }
.table-actions { display:flex; gap:5px; flex-wrap:wrap; }
.admin-table tbody tr:nth-child(even) { background: color-mix(in oklab, var(--panel), #8aa0c8 8%); }
.admin-table tbody tr:hover { background: color-mix(in oklab, var(--panel), var(--accent) 10%); }
.btn-secondary { background:#5f74a3; }
.btn-compact { padding:6px 9px; font-size:12px; line-height:1.1; }

.table-actions button { padding:6px 10px; font-size:12px; }
.btn-danger { background:#d9534f; }
.btn-warning { background:#f0ad4e; color:#1b1b1b; }


.session-status { display:flex; align-items:center; gap:8px; }
.status-dot { width:10px; height:10px; border-radius:999px; display:inline-block; }
.status-dot.online { background:#2fbf66; }
.status-dot.offline { background:#d9534f; }

@media (max-width: 1200px) {
  .admin-user-form { max-width:none; }
  .admin-user-row-3 { grid-template-columns: 1fr; }
  .admin-user-row-5 { grid-template-columns: 1fr 1fr; }
}

.theme-toggle {
  position:fixed;
  left:14px;
  bottom:14px;
  width:46px;
  height:46px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--panel);
  color:var(--text);
  z-index:99;
}

.agent-form-actions { display:flex; align-items:flex-end; }
.agent-form-actions button { width:max-content; }
.agent-knowledge-list { margin:8px 0 0; padding-left:18px; display:flex; flex-direction:column; gap:6px; }
.agent-knowledge-list li { display:flex; flex-direction:column; gap:2px; }
.agent-knowledge-list small { opacity:0.75; }

#history { margin-top:8px; }
.history-header { display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:8px; }
.history-header h4 { margin:0; font-size:14px; font-weight:600; }
.history-list { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:6px; }
.history-item { padding:8px 10px; border:1px solid var(--border); border-radius:8px; background:color-mix(in oklab, var(--panel), #8aa0c8 4%); cursor:pointer; transition:background .15s ease,border-color .15s ease; }
.history-item:hover { background:color-mix(in oklab, var(--panel), var(--accent) 12%); border-color:color-mix(in oklab, var(--accent), white 20%); }
.history-item.selected { border-color:var(--accent); background:color-mix(in oklab, var(--panel), var(--accent) 20%); }

#sections { display:flex; flex-direction:column; gap:10px; }
.section-card { border:1px solid var(--border); border-radius:10px; padding:10px; background:color-mix(in oklab, var(--panel), #8aa0c8 6%); }
.section-title { font-weight:700; display:block; margin-bottom:6px; text-transform:capitalize; }

.section-actions { display:flex; gap:6px; margin-bottom:8px; }
.section-actions .btn-secondary { padding:4px 8px; font-size:12px; }
.section-card textarea { width:100%; min-height:120px; line-height:1.45; }
